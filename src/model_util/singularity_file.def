# Method 1
Bootstrap: library
From: ubuntu:18.04

%post

    # Install python and other tools
    #Allow us to find the python3-pip package later
    # on.
    apt-get update -y
    # Non-interactive is used to ensure prompts are omitted.
    DEBIAN_FRONTEND=noninteractive apt-get install -y --no-install-recommends \
    python3-dev \
    python3-tk \
    python3-pip \
    python3-setuptools \
    systemd \
    imagemagick \
    curl \
    openslide-tools


    # Reduce image size
    rm -rf /var/lib/apt/lists/*

    # Update pip
    python3 -m pip install --upgrade pip

    # Install python libraries
    python3 -m pip install wheel
    python3 -m pip install torch torchvision numpy matplotlib torchsummary tensorboardX \
    scikit-learn os pandas scikit-image scipy.io opencv-python pylint matplotlib.pyplot \
    PIL sys pathlib torchvision.transforms traceback torchvision.models.detection.backbone_utils\
    confuse torch.nn torch.optim



#Method 2
From: pytorch/pytorch:0.4.1-cuda9-cudnn7-devel
Bootstrap: docker

%post
    apt-get update && apt-get install -y git ...
    apt-get update -y
    # Non-interactive is used to ensure prompts are omitted.
    DEBIAN_FRONTEND=noninteractive apt-get install -y --no-install-recommends \
    python3-dev \
    python3-tk \
    python3-pip \
    python3-setuptools \
    systemd \
    imagemagick \
    curl \
    openslide-tools


    # Reduce image size
    rm -rf /var/lib/apt/lists/*

    # Update pip
    python3 -m pip install --upgrade pip

    # Install python libraries
    python3 -m pip install wheel
    python3 -m pip install torch torchvision numpy matplotlib torchsummary tensorboardX \
    os pandas scikit-image scipy.io matplotlib.pyplot PIL sys pathlib confuse torch.nn  \
    torch.optim torchvision.transforms traceback torchvision.models.detection.backbone_utils\
    

%environment
    export MYVAR=MYVAL

